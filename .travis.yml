sudo: required

language: generic

services:
    - docker

before_install:
    - sudo /etc/init.d/postgresql stop

install:
    - sudo mv .env.example .env
    - docker-compose -f docker-compose.base.yml -f docker-compose.dev-services.yml pull
    - docker-compose -f docker-compose.base.yml -f docker-compose.dev-services.yml build

script:
    - docker-compose -f docker-compose.base.yml -f docker-compose.dev-services.yml up -d
    - sleep 60
    - docker ps -a
    - docker images
#     - docker login --username=${DOCKER_HUB_USERNAME} --email=${DOCKER_HUB_EMAIL} --password=${DOCKER_HUB_PASSWORD}
# deploy:
#     provider: script
#     script: ./deploy.sh
#     skip_cleanup: true
#     on:
#        branch: master

# notifications:
#   slack:
#     secure: TKPyvVSxr6x4BnNAK4j5/sWQhyScalgc13gOX0300TLqOtuw1bRvKm0XrUaK2n32XRzb9ZkOQDJvPo2cumXOYM16343No5NA2ekeDc6ULgtOFta8hY3Txc9ATkvLSnUfRr5mLQ1sknGLKfV2IFDFJiBz9ivMLivpaFR6gn7vcFM=
